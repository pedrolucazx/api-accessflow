# Projeto de Gerenciamento de Usu√°rios e Perfis

Este projeto √© uma API de gerenciamento de usu√°rios e perfis com GraphQL, constru√≠da utilizando **Node.js**, **TypeScript**, **Apollo Server**, **Knex**, e **PostgreSQL**. A aplica√ß√£o oferece opera√ß√µes de CRUD (criar, ler, atualizar e excluir) para usu√°rios e perfis, com suporte a associa√ß√µes entre eles.

## ‚öôÔ∏è Tecnologias Utilizadas

- **Node.js**: Ambiente de execu√ß√£o para JavaScript.
- **TypeScript**: Superset do JavaScript que adiciona tipagem est√°tica.
- **Apollo Server**: Framework para cria√ß√£o de servidores GraphQL.
- **Knex.js**: Query builder para intera√ß√£o com o banco de dados.
- **PostgreSQL**: Banco de dados relacional utilizado.
- **Docker**: Configura√ß√£o do ambiente de banco de dados.
- **ESLint** e **Prettier**: Qualidade e formata√ß√£o do c√≥digo.
- **Husky**, **Commitizen**, **lint-staged** e **commitlint**: Boas pr√°ticas para controle de vers√µes.
- **Jest** e **Supertest**: Ferramentas para testes automatizados.

![NodeJS](https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white)
![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white)
![Apollo-GraphQL](https://img.shields.io/badge/-ApolloGraphQL-311C87?style=for-the-badge&logo=apollo-graphql)
![GraphQL](https://img.shields.io/badge/-GraphQL-E10098?style=for-the-badge&logo=graphql&logoColor=white)
![Knex.js](https://img.shields.io/badge/Knex.js-orange?style=for-the-badge&logo=data:image/svg+xml;base64,<base64-da-imagem>&logoColor=white)
![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)
![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white)
![ESLint](https://img.shields.io/badge/ESLint-4B3263?style=for-the-badge&logo=eslint&logoColor=white)
![Prettier](https://img.shields.io/badge/prettier-%23F7B93E.svg?style=for-the-badge&logo=prettier&logoColor=black)
![Husky](https://img.shields.io/badge/Husky-%23454A64.svg?style=for-the-badge&logo=husky&logoColor=white)
![Commitizen](https://img.shields.io/badge/Commitizen-%23FE6B37.svg?style=for-the-badge&logo=commitizen&logoColor=white)
![Jest](https://img.shields.io/badge/Jest-%23C21325.svg?style=for-the-badge&logo=jest&logoColor=white)
![Supertest](https://img.shields.io/badge/Supertest-%23007ACC.svg?style=for-the-badge&logo=testing-library&logoColor=white)

## üõ†Ô∏è Funcionalidades

### **CRUD de Perfis**

- **Criar**: Adicionar novos perfis com nome e descri√ß√£o.
- **Editar**: Modificar informa√ß√µes de perfis existentes.
- **Listar**: Buscar todos os perfis ou um espec√≠fico.
- **Excluir**: Remover perfis da base de dados.

### **CRUD de Usu√°rios**

- **Criar**: Adicionar usu√°rios com nome, email, senha e status de ativo.
- **Editar**: Alterar informa√ß√µes de usu√°rios.
- **Listar**: Buscar todos os usu√°rios ou um espec√≠fico.
- **Excluir**: Remover usu√°rios da base de dados.

### **Relacionamento Usu√°rios-Perfis**

- Utiliza√ß√£o da tabela intermedi√°ria `usuarios_perfis` para associar usu√°rios a m√∫ltiplos perfis.

---

## üöÄ Instru√ß√µes de Execu√ß√£o

### **Configura√ß√£o do Ambiente**

1. Clone o reposit√≥rio:

   ```bash
   git clone https://github.com/pedrolucazx/auth-graphql.git
   cd auth-graphql
   ```

2. Instale as depend√™ncias:

   ```bash
   yarn install
   ```

3. Configure as vari√°veis de ambiente:

   - Crie um arquivo `.env` a partir do exemplo `.env.example` e ajuste as configura√ß√µes necess√°rias.

4. Suba o banco de dados no ambiente de desenvolvimento:

   ```bash
   yarn docker:dev
   ```

5. Execute as migrations e seeds:

   ```bash
   yarn knex migrate:latest
   yarn knex seed:run
   ```

6. Inicie o servidor:

   ```bash
   yarn start:dev
   ```

---

## üé® Contribui√ß√£o e Commits

### **Fluxo de Commit**

Este projeto utiliza **Husky**, **Commitizen**, **lint-staged**, e **commitlint** para padronizar os commits e melhorar a qualidade do c√≥digo.

1. **Pr√©-requisitos**:

   - Ao criar um commit, o Husky garante que:
     - O c√≥digo passe por linters configurados com **lint-staged**.
     - A mensagem de commit esteja no formato correto, validada pelo **commitlint**.

2. **Cria√ß√£o de Commits com Commitizen**:

   - Use o comando a seguir para criar commits de forma interativa:
     ```bash
     yarn commit
     ```
   - Escolha o tipo de mudan√ßa, adicione uma descri√ß√£o curta e outros detalhes.

3. **Formato de Mensagem de Commit**:
   A mensagem segue o padr√£o **Conventional Commits**, como:

   ```
   feat: adiciona funcionalidade de associa√ß√£o de usu√°rios a perfis
   fix: corrige valida√ß√£o de email ao criar usu√°rios
   ```

4. **Valida√ß√£o Antes do Commit**:
   - Antes de concluir o commit, o Husky roda scripts configurados em **lint-staged**, como:
     - Checagem de lint com **ESLint**.
     - Formata√ß√£o autom√°tica com **Prettier**.
   - Apenas arquivos aprovados ser√£o adicionados ao commit.
